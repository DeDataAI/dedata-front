(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{48177:function(e,t,n){Promise.resolve().then(n.bind(n,18202))},18202:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(57437),s=n(2265),l=n(80246),o=n(10701),r=n(75893),u=n(42007),c=n(26735),i=n(27539),d=n(36922),m=n(15670);let{TextArea:f}=r.default;var g=function(e){let{roleStatus:t,applyStatus:n,languageStatus:l,onSaveChange:o,onExpiredTimeChange:r}=e,[g,h]=(0,s.useState)({id:0,content:""}),[x,p]=(0,s.useState)(""),{address:b,isConnected:S}=(0,c.m)(),{signMessageAsync:v}=(0,i.Q)();async function w(){if(console.log("submit",x.length,l),"en"===l){if(x.length<30){u.ZP.info("Please enter the news abstract, suggest less than 30 words");return}}else if(x.length<5){u.ZP.info("Please enter the news abstract, suggest less than 30 words");return}C()}async function C(){let e="caseId: ".concat(null==g?void 0:g.id,"\ncontent: ").concat(x),t=await v({message:e}),n={caseId:null==g?void 0:g.id,content:x,address:b,signature:t},{code:a,msg:s}=await (0,d.ej)(n);a===m.Gh?(u.ZP.info("en"===l?"Save successfully":"保存成功，继续完成更多任务吧"),setTimeout(()=>{o(),h({id:0,content:""})},2e3)):u.ZP.error(s)}return((0,s.useEffect)(()=>{async function e(){let{code:e,data:t,msg:n}=await (0,d.gF)(b,l);if(e===m.Gh){let{content:e,expiredTime:n}=t;h({...t,content:e.replace("\n","<br>")||""});let a=(n-Math.floor(Date.now()))/1e3;if(a<0)return;r({minutes:Math.floor(a/60),seconds:Math.floor(a%60)})}else u.ZP.error(n),setTimeout(()=>{o()},2e3)}b&&1===t&&n&&(console.log("loadData"),e())},[b,t,n,l,o,r]),1===t&&n)?(0,a.jsx)("div",{className:"h-[calc(100%-0.4rem)] pt-[0.16rem]",children:(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto",children:[(0,a.jsx)("span",{className:"text-[#000] text-[0.14rem] font-bold mb-[0.14rem]",children:"Original Article"}),(0,a.jsx)("div",{className:"text-[#000] text-[0.14rem] leading-[0.22rem] bg-[#F5F7FA] px-[0.24rem] py-[0.16rem] rounded-[0.16rem]",dangerouslySetInnerHTML:{__html:null==g?void 0:g.content}}),(0,a.jsxs)("span",{className:"text-[#000] text-[0.14rem] font-bold mt-[0.24rem] mb-[0.14rem]",children:["Abstract",(0,a.jsx)("span",{className:"text-[#999] text-[0.12rem] font-bold mt-[0.24rem] mb-[0.14rem]",children:"（Summarize the news, no more than 15 words）"})]}),(0,a.jsx)(f,{className:"text-[#000] !text-[0.14rem] !leading-[0.22rem] !bg-[#F5F7FA] !px-[calc(0.24rem-11px)] !py-[calc(0.14rem-4px)] rounded-[0.16rem] !shadow-none !border-none !focus:bg-[#F5F7FA] !hover:border-none !hover:bg-[#F5F7FA] !focus:border-none !focus:shadow-none",placeholder:"Please input...",showCount:!0,maxLength:200,autoSize:{minRows:2,maxRows:4},onChange:e=>p(e.target.value)}),(0,a.jsx)("div",{className:"w-[2rem] h-[0.48rem] bg-[#3A54DF] text-[#fff] rounded-[0.16rem] leading-[0.48rem] text-center font-bold text-[0.18rem] mt-[0.24rem] cursor-pointer",onClick:w,children:"Save"})]})}):null},h=n(57266),x=n(86377);function p(){let{address:e,isConnected:t}=(0,c.m)(),[n,r]=(0,s.useState)("en"),[u,i]=(0,s.useState)(1),[f,p]=(0,s.useState)(10),[b,S]=(0,s.useState)(0),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{async function t(){let{code:t,data:n,msg:a}=await (0,d.G4)(e);t===m.Gh&&(n.isExist?(r(n.pendingCase.language),i(n.pendingCase.taskType),w(!0)):w(!1))}e&&t()},[e]);let C=(0,s.useCallback)(e=>{let{languageStatus:t,roleStatus:n}=e;r(t),i(n)},[]);function y(e){console.log("onApplyChange",e),w(e),p(10),S(0)}let j=(0,s.useCallback)(e=>{let{minutes:t,seconds:n}=e;p(t),S(n)},[]),F=(0,s.useCallback)(()=>{console.log("onSaveChange"),w(!1)},[]);return(0,a.jsxs)("div",{className:"flex flex-col flex-1 w-full overflow-hidden relative",children:[(0,a.jsx)(x.Z,{applyStatus:v}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 w-full bg-[#fff] rounded-[0.16rem] px-[0.24rem] py-[0.16rem] overflow-hidden relative",children:[(0,a.jsx)(l.Z,{title:"Work Zone",disabled:v,roleStatus:u,languageStatus:n,onApplyChange:y,onRoleAndLanguageChange:C,minutes:f,seconds:b}),(0,a.jsx)(o.Z,{applyStatus:v,onApplyChange:y,roleStatus:u,languageStatus:n,onRoleAndLanguageChange:C}),(0,a.jsx)(g,{roleStatus:u,applyStatus:v,languageStatus:n,onSaveChange:F,onExpiredTimeChange:j}),(0,a.jsx)(h.Z,{type:"alpha",roleStatus:u,applyStatus:v,languageStatus:n,onSaveChange:F,onExpiredTimeChange:j})]})]})}}},function(e){e.O(0,[6496,3486,2007,3240,7535,2971,7023,1744],function(){return e(e.s=48177)}),_N_E=e.O()}]);